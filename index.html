<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FERRETERIA CONSTRUMOLE</title>
</head>
<body>
    <div class="welcome-section">
        <h1>Bienvenido a Ferretería Contrumole</h1>
    </div>
    
    <div class="login-container" id="login-container">
        <form id="admin-login-form">
            <h2>Inicio de Sesión del Administrador</h2>
            <label for="admin-username">Usuario:</label>
            <input type="text" id="admin-username" required>
    
            <label for="admin-password">Contraseña:</label>
            <input type="password" id="admin-password" required>
    
            <button type="button" onclick="loginComoAdmin()">Iniciar Sesión</button>
        </form>
    </div>
    
    <div class="admin-container" id="admin-container">
        <h2>Administración de Items</h2>
    
        
        <div class="form-container" id="product-form-container">
            <h3>Agregar Nuevo Item</h3>
            <form id="add-item-form">
                <label for="item-name">Nombre del Item:</label>
                <input type="text" id="item-name" required>
    
                <label for="item-price">Precio:</label>
                <input type="number" id="item-price" required>
    
                <button type="button" onclick="agregarItem()">Agregar Item</button>
            </form>
        </div>
    
        <div id="item-list" class="item-list">
            <!-- Aquí se mostrarán los elementos -->
        </div>
    </div>
    
    <script>

        // Variables
        const simulacionBackend = {
            credencialesAdmin: {
                nombreUsuario: "admin",
                contraseña: "admin123",
            },
            items: [],
        };
    
        let estaAdminLogueado = false;

        // Metodos
    
        function loginComoAdmin() {
            const nombreUsuarioIngresado = document.getElementById('admin-username').value;
            const contraseñaIngresada = document.getElementById('admin-password').value;
    
            simularLlamadaServidor().then(() => {
                if (
                    (nombreUsuarioIngresado === simulacionBackend.credencialesAdmin.nombreUsuario && contraseñaIngresada === simulacionBackend.credencialesAdmin.contraseña) ||
                    (nombreUsuarioIngresado === "RobinsonVergara" && contraseñaIngresada === "12345")
                ) {
                    estaAdminLogueado = true;
                    alert('Inicio de sesión exitoso.');
                    mostrarContenedorAdmin();
                    mostrarItems();
                } else {
                    alert('Credenciales incorrectas. Intenta de nuevo.');
                }
            });
        }
    
        function mostrarContenedorAdmin() {
            document.getElementById('login-container').style.display = 'none';
            document.getElementById('admin-container').style.display = 'block';
        }
    
        function agregarItem() {
            if (estaAdminLogueado) {
                const nombreItem = document.getElementById('item-name').value;
                const precioItem = document.getElementById('item-price').value;
    
                if (nombreItem && precioItem) {
                    const nuevoItem = {
                        nombre: nombreItem,
                        precio: parseFloat(precioItem),
                    };
    
                    simularLlamadaServidor().then(() => {
                        simulacionBackend.items.push(nuevoItem);
                        mostrarItems();
                    });
                } else {
                    alert('Por favor, complete todos los campos.');
                }
            } else {
                alert('Debe iniciar sesión como administrador para agregar items.');
            }
        }
    
        function mostrarItems() {
            const contenedorListaItems = document.getElementById('item-list');
            contenedorListaItems.innerHTML = '';
    
            simulacionBackend.items.forEach((item, index) => {
                const elementoItem = document.createElement('div');
                elementoItem.classList.add('item');
    
                const botonEliminar = document.createElement('button');
                botonEliminar.classList.add('button-delete');
                botonEliminar.textContent = 'Eliminar';
                botonEliminar.addEventListener('click', () => eliminarItem(index));
    
                const botonEditar = document.createElement('button');
                botonEditar.classList.add('button-edit');
                botonEditar.textContent = 'Editar';
                botonEditar.addEventListener('click', () => editarItem(index));
    
                elementoItem.innerHTML = `<strong>${item.nombre}</strong> - $${item.precio.toFixed(2)}`;
                elementoItem.appendChild(botonEditar);
                elementoItem.appendChild(botonEliminar);
    
                contenedorListaItems.appendChild(elementoItem);
            });
        }
    
        function eliminarItem(index) {
            if (estaAdminLogueado) {
                simularLlamadaServidor().then(() => {
                    simulacionBackend.items.splice(index, 1);
                    mostrarItems();
                });
            } else {
                alert('Debe iniciar sesión como administrador para eliminar items.');
            }
        }
    
        function editarItem(index) {
            const nuevoNombre = prompt('Ingrese el nuevo nombre del item:');
            const nuevoPrecio = prompt('Ingrese el nuevo precio del item:');
            
            if (nuevoNombre !== null && nuevoPrecio !== null) {
                simulacionBackend.items[index].nombre = nuevoNombre;
                simulacionBackend.items[index].precio = parseFloat(nuevoPrecio);
                mostrarItems();
            }
        }
    
        function simularLlamadaServidor() {
            return new Promise(resolve => setTimeout(resolve, 1000));
        }
    </script>
    
 
</body>
</html>
